# 03-1-Vue 组件化开发基础

## 一 Vue 组件创建化开发思想

Vue 的组件化是指从 UI 界面角度出发，合理重用 UI 组件。

## 二 注册组件

### 2.0 组件注册 API

使用 `Vue.component()`函数可以注册全局组件，使用 `components`属性可以注册私有组件。

这里有两个注意点：

- 模板中的元素必须只有一个根元素（外围包裹元素）
- 如果组件名称没有使用驼峰式命名，则该名称可以直接使用。若使用了驼峰命名，在引用组件的时候，需要把大写的驼峰改为小写的字母，同时两个单词之间使用‘-’连接。

### 2.1 创建全局组件

```html
<div id="div">
  <!--驼峰命名的组件名，在html中引用使用 - 连接符，并修改为小写-->
  <my-comp></my-comp>
</div>

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script>
  // 依次传入 组件名、组件内容：内部数据、模板、函数等等
  Vue.component("myComp", {
    // 组件内部的数据必须使用函数返回值的形式：以形成闭包环境
    data: function () {
      return {
        count: 0,
      };
    },
    template: `<button @click="count++">{{count}}</button>`,
  });

  let app = new Vue({
    el: "#div",
  });
</script>
```

贴士：其实现在创建的组件 `myComp` 是 `#div` 这个全局父组件的子组件。

### 2.2 创建私有组件

```html
<div id="app">
  <my-com></my-com>
</div>

<script>
  new Vue({
    el: "#app",
    components: {
      myCom: {
        template: "<h3>私有组件</h3>",
      },
    },
  });
</script>
```

贴士：局部组件只能在注册他的父组件中使用！

### 1.3 引用 template

template 属性也可以直接引用其他已经定义好的 template。

```html
<div id="app">
  <my-com3></my-com3>
</div>

<template id="tmp1">
  <h3>组件</h3>
</template>

<script>
  Vue.component("myCom3", {
    template: "#tmp1",
  });

  new Vue({
    el: "#app",
  });
</script>
```

## 二 组件切换-动态组件

除了可以使用自定义 true/false 方式来切换组件外，vue 本身也提供了组件切换机制：在 component 里展示对应名称的组件

```html
<div id="app">
  <span @click="who='com1'">显示组件1</span>
  <span @click="who='com2'">显示组件2</span>
  <component :is="who"></component>
</div>

<script>
  Vue.component("com1", {
    template: "<h3>111</h3>",
  });

  Vue.component("com2", {
    template: "<h3>222</h3>",
  });

  let vm = new Vue({
    el: "#app",
    data: {
      who: "com1",
    },
  });
</script>
```

## 三 组件内的数据存储

组件内也可以有 data 属性，但是该属性是个函数，且必须返回一个对象：

```html
<div id="app">
  <my-com></my-com>
</div>

<script>
  new Vue({
    el: "#app",
    components: {
      myCom: {
        template: "<h3>{{msg}}</h3>",
        data: function () {
          return {
            msg: "组件内部数据",
          };
        },
      },
    },
  });
</script>
```

组件之间数据是不能直接共享的，比如 data、method、computed 等，必须通过一系列的机制来进行传递。
