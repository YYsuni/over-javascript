# 10-TS 在工程中的实践

## 一 类型的定义文件

### 1.1 类型定义文件的使用

TS 中如果要使用 npm 上的一些 JS 包，需要声明类型的定义文件`.d.ts`。

比如现在使用第三方包：`jquery`，其语法是 JavaScript，在 HTML 文档或者使用 import 引入后，使用 `$` 等 jquery 的函数能够正常运行，但是编辑器中总是会包无法识别 \$ 等错误。此时需要安装其翻译文件：

```txt
npm i @types/jquery -D
```

翻译文件的源码中，核心文件是：`index.d.ts`，在该文件中补全了 JS 文件中的所有声明相关的定义。

### 3.2 类型定义文件的书写

现在我们自己书写一个翻译文件：`jquery.d.ts`。

```ts
// 定义全局变量
declare var $: (param: () => void) => void

// 定义全局函数，支持函数重载
declare function $(param: () => void) => void

// 使用interface 实现重载
interface Instance {
  html: (html: string)=>Instance
}

interface jQuery {
  (readyFunc: ()= void): void
  (selector: string): Instance
}
declare var $:jQuery
```

注意：如果 jquery 是通过 import 方式引入，需要定义模块。

```ts
declare module 'jquery' {
  // 书写所有定义 无需 declare
  var $: (param: () => void) => void
  function $(param: () => void) => void

  export = $
}
```
